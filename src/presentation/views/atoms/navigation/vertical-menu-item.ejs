<%
/**
 * Vertical Menu Item Atom
 * Individual menu item for vertical navigation menus
 *
 * Atomic Design Level: Atom
 * Category: Navigation
 *
 * @param {string} label - Text label for the menu item (required)
 * @param {string} icon - Tabler icon name without 'ti-' prefix (required)
 * @param {string} href - Navigation URL (required)
 * @param {boolean} active - Whether this item is currently active (default: false)
 * @param {string|number} badge - Optional badge content (counter, label, etc.)
 * @param {string} badgeVariant - Bootstrap badge variant (default: 'primary')
 * @param {string} id - Optional ID attribute for the item
 * @param {string} additionalClasses - Additional CSS classes
 *
 * Features:
 * - Active state highlighting with primary color
 * - Icon with consistent spacing
 * - Optional badge support for notifications/counters
 * - Hover effects with smooth transitions
 * - Accessible with ARIA labels
 * - Keyboard navigation support
 *
 * Usage Example:
 * <%- include('../../atoms/navigation/vertical-menu-item', {
 *   label: 'Dashboard',
 *   icon: 'home',
 *   href: '/dashboard',
 *   active: true,
 *   badge: '5',
 *   badgeVariant: 'danger'
 * }) %>
 */

// Default parameters
const menuLabel = typeof label !== 'undefined' ? label : 'Menu Item';
const menuIcon = typeof icon !== 'undefined' ? icon : 'circle';
const menuHref = typeof href !== 'undefined' ? href : '#';
const menuActive = typeof active !== 'undefined' ? active : false;
const menuBadge = typeof badge !== 'undefined' ? badge : null;
const menuBadgeVariant = typeof badgeVariant !== 'undefined' ? badgeVariant : 'primary';
const menuId = typeof id !== 'undefined' ? id : '';
const menuAdditionalClasses = typeof additionalClasses !== 'undefined' ? additionalClasses : '';

// Build class string
const itemClasses = ['vertical-menu-item', menuActive ? 'active' : '', menuAdditionalClasses]
    .filter(cls => cls.length > 0)
    .join(' ');

// Build ID attribute if provided
const idAttribute = menuId ? ` id="${menuId}"` : '';
%>
<a href="<%= menuHref %>"
   class="<%= itemClasses %>"<%= idAttribute %>
   aria-current="<%= menuActive ? 'page' : 'false' %>"
   role="menuitem">
    <div class="menu-item-content">
        <i class="ti ti-<%= menuIcon %> menu-item-icon"></i>
        <span class="menu-item-label"><%= menuLabel %></span>
        <% if (menuBadge) { %>
            <span class="badge bg-<%= menuBadgeVariant %> ms-auto"><%= menuBadge %></span>
        <% } %>
    </div>
</a>

<!-- Vertical Menu Item Styles -->
<style>
.vertical-menu-item {
    display: block;
    padding: 0.75rem 1rem;
    color: #5a6a85;
    text-decoration: none;
    border-radius: 0.375rem;
    margin-bottom: 0.25rem;
    transition: all 0.2s ease-in-out;
    position: relative;
}

.vertical-menu-item:hover {
    background-color: #f8f9fa;
    color: #f76b1c;
    text-decoration: none;
}

.vertical-menu-item.active {
    background: linear-gradient(135deg, #f76b1c 0%, #fa984f 100%);
    color: white;
    font-weight: 600;
}

.vertical-menu-item.active:hover {
    background: linear-gradient(135deg, #e55a0b 0%, #e98840 100%);
    color: white;
}

.menu-item-content {
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.menu-item-icon {
    font-size: 1.25rem;
    flex-shrink: 0;
}

.menu-item-label {
    flex: 1;
    font-size: 0.9375rem;
}

.vertical-menu-item .badge {
    font-size: 0.75rem;
    padding: 0.25rem 0.5rem;
    border-radius: 0.25rem;
}

.vertical-menu-item.active .badge {
    background-color: rgba(255, 255, 255, 0.3) !important;
    color: white;
}

/* Focus state for keyboard navigation */
.vertical-menu-item:focus {
    outline: 2px solid #f76b1c;
    outline-offset: 2px;
}

.vertical-menu-item:focus:not(:focus-visible) {
    outline: none;
}

/* Active border indicator */
.vertical-menu-item.active::before {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 4px;
    height: 70%;
    background-color: rgba(255, 255, 255, 0.8);
    border-radius: 0 4px 4px 0;
}
</style>
